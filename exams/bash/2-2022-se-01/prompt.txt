Зад. 54 2022-SE-01 Съвременните компютри могат да влизат в различни режими за енергоспестяване (sus-
pend) и излизат от този режим (wake-up) при настъпването на определени събития. Linux kernel предоставя
специален виртуален файл / p r o c / a c p i / w a k e u p , чрез който може да се проверява или променя настройката

за “събуждане” при настъпване на различни събития, в общия случай - при активност на някое устройство.
Тъй като този файл е интерфейс към ядрото, “четенето” от файла и “писането” във файла изглеждат
различно.
За улеснение на задачата ще ползваме опростено описание на този файл.
Под whitespace разбираме произволна комбинация от табове и интервали. При четене от файла изходът
представлява четири колони, разделени с whitespace, в полетата не може да има whitespace; първият
ред е header на съответната колона. Примерно съдържание на файла:
D e v i c e S - s t a t e S t a t u s S y s f s n o d e
G L A N S 4 * e n a b l e d p c i : 0 0 0 0 : 0 0 : 1 f . 6
X H C S 3 * e n a b l e d p c i : 0 0 0 0 : 0 0 : 1 4 . 0
X D C I S 4 * d i s a b l e d
L I D S 4 * e n a b l e d p l a t f o r m : P N P 0 C 0 D : 0 0
H D A S S 4 * d i s a b l e d p c i : 0 0 0 0 : 0 0 : 1 f . 3
R P 0 1 S 4 * e n a b l e d p c i : 0 0 0 0 : 0 0 : 1 c . 0
където:
• първата колона дава уникално име на устройство, което може да събуди машината, като името

е ограничено до четири знака главни латински букви и цифри;
• третата колона описва дали това устройство може да събуди машината. Възможните стойности
са e n a b l e d /d i s a b l e d , предхождани от звездичка;
• втората и четвъртата колона ги игнорираме в рамките на задачата.
При записване на име на устройство във файла / p r o c / a c p i / w a k e u p , неговото състояние се променя
от d i s a b l e d на e n a b l e d или обратно. Например, ако файлът изглежда както примера по-горе, при

запис на X H C в него, третият ред ще се промени на:
X H C S 3 * d i s a b l e d p c i : 0 0 0 0 : 0 0 : 1 4 . 0
При запис на H D A S , шестият ред ще се промени на:
H D A S S 4 * e n a b l e d p c i : 0 0 0 0 : 0 0 : 1 f . 3
Дефиниран е формат на конфигурационен файл, който описва желан комплект от настройки на wake-
up събития. Примерен файл:
# c o m m e n t b a r
G L A N d i s a b l e d
L I D e n a b l e d # c o m m e n t f o o
където:
• знакът диез (# ) е знак за коментар до края на реда;

• редовете би трябвало да са комбинация от име на устройство и желаното състояние на настройката
за събуждане при събития от това устройство, разделени с whitespace.
Напишете скрипт, който при подаден първи параметър име на конфигурационен файл в горния формат
осигурява исканите настройки за събуждане. Ако във файла има ред за устройство, което не съществува,
скриптът да извежда предупреждение. Обърнете внимание на обработката за грешки и съобщенията
към потребителя – искаме скриптът да бъде удобен и валиден инструмент
